nanobind_add_module_with_targets(_pers_cub_low_dim_ext _pers_cub_low_dim.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_cubical_complex_ext _cubical_complex.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_ripser_ext _ripser.cc)
nanobind_add_module_with_targets(_rips_complex_ext _rips_complex.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_edge_collapse_ext _edge_collapse.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_simplex_tree_ext _simplex_tree.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_reader_utils_ext _reader_utils.cc)
nanobind_add_module_with_targets(_witness_complex_ext _witness_complex.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_strong_witness_complex_ext _strong_witness_complex.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_nerve_gic_ext _nerve_gic.cc TARGETS TBB::tbb)
nanobind_add_module_with_targets(_hera_ext _hera.cc)
nanobind_add_module_with_targets(_bottleneck_ext _bottleneck.cc TARGETS CGAL::CGAL TBB::tbb)
# delaunay complex is split in several files to avoid to much memory consumption during compilation
nanobind_add_module_with_targets(_delaunay_complex_ext _delaunay_complex.cc _delaunay_complex_2d.cc _delaunay_complex_3d.cc _delaunay_complex_dyn.cc TARGETS Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_tangential_complex_ext _tangential_complex.cc TARGETS Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_euclidean_witness_complex_ext _euclidean_witness_complex.cc TARGETS Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_euclidean_strong_witness_complex_ext _euclidean_strong_witness_complex.cc TARGETS Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_subsampling_ext _subsampling.cc TARGETS Eigen3::Eigen CGAL::CGAL TBB::tbb)
if (TARGET CGAL::CGAL)
  add_library(random SHARED random.cpp)
  target_link_libraries(random PRIVATE CGAL::CGAL)
endif()
nanobind_add_module_with_targets(_random_ext _random.cc TARGETS Python::NumPy CGAL::CGAL)
if (TARGET Python::NumPy AND TARGET CGAL::CGAL)
  add_dependencies(_random_ext random)
  target_link_libraries(_random_ext PRIVATE random)
endif()
