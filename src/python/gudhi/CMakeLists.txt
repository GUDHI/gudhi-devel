nanobind_add_module_with_targets(_pers_cub_low_dim_ext _pers_cub_low_dim.cc TBB::tbb)
nanobind_add_module_with_targets(_cubical_complex_ext _cubical_complex.cc TBB::tbb)
nanobind_add_module_with_targets(_ripser_ext _ripser.cc)
nanobind_add_module_with_targets(_rips_complex_ext _rips_complex.cc TBB::tbb)
nanobind_add_module_with_targets(_edge_collapse_ext _edge_collapse.cc TBB::tbb)
nanobind_add_module_with_targets(_simplex_tree_ext _simplex_tree.cc TBB::tbb)
nanobind_add_module_with_targets(_reader_utils_ext _reader_utils.cc)
nanobind_add_module_with_targets(_witness_complex_ext _witness_complex.cc TBB::tbb)
nanobind_add_module_with_targets(_strong_witness_complex_ext _strong_witness_complex.cc TBB::tbb)
nanobind_add_module_with_targets(_nerve_gic_ext _nerve_gic.cc TBB::tbb)
nanobind_add_module_with_targets(_hera_ext _hera.cc)
nanobind_add_module_with_targets(_bottleneck_ext _bottleneck.cc CGAL::CGAL TBB::tbb)
if(TARGET Eigen3::Eigen)
    add_library(_delaunay_complex_ext_2d SHARED _delaunay_complex_2d.cc)
    add_library(_delaunay_complex_ext_3d SHARED _delaunay_complex_3d.cc)
    add_library(_delaunay_complex_ext_dynd SHARED _delaunay_complex_dyn.cc)
    # works only because NANOBIND_exec was already build by a call of `nanobind_add_module`
    target_link_libraries(_delaunay_complex_ext_2d CGAL::CGAL Eigen3::Eigen $<TARGET_NAME_IF_EXISTS:TBB::tbb> ${NANOBIND_exec})
    target_link_libraries(_delaunay_complex_ext_3d CGAL::CGAL Eigen3::Eigen $<TARGET_NAME_IF_EXISTS:TBB::tbb> ${NANOBIND_exec})
    target_link_libraries(_delaunay_complex_ext_dynd CGAL::CGAL Eigen3::Eigen $<TARGET_NAME_IF_EXISTS:TBB::tbb> ${NANOBIND_exec})
endif()
nanobind_add_module_with_targets(_delaunay_complex_ext _delaunay_complex.cc Eigen3::Eigen CGAL::CGAL TBB::tbb _delaunay_complex_ext_2d _delaunay_complex_ext_3d _delaunay_complex_ext_dynd)
nanobind_add_module_with_targets(_tangential_complex_ext _tangential_complex.cc Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_euclidean_witness_complex_ext _euclidean_witness_complex.cc
                                 Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_euclidean_strong_witness_complex_ext _euclidean_strong_witness_complex.cc
                                 Eigen3::Eigen CGAL::CGAL TBB::tbb)
nanobind_add_module_with_targets(_subsampling_ext _subsampling.cc Eigen3::Eigen CGAL::CGAL TBB::tbb)

